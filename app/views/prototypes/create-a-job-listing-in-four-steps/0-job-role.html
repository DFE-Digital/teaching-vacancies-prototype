{% extends "create-a-job-four-steps.html" %}

{% set activePage = "step0" %}
{% set pageName = "Job role 1" %}
{% set activePageNumber = "1" %}
{% set sectionActive = "hiring staff" %}

{% block createJobcontent %}
<div class="sub-nav govuk-grid-row full-width-bg-white govuk-!-margin-bottom-6 govuk-!-margin-left-0">
 
    <ul class="tabs">
      <li class="active"><a href="#">Step one</a></li>
      <li><a href="#">Step two</a></li>
      <li><a href="#">Step three</a></li>
      <li><a href="#">Step four</a></li>
    </ul>

</div>


<div class="govuk-grid-row full-width-bg-white govuk-!-padding-top-8 govuk-!-padding-bottom-4 govuk-!-padding-left-3 govuk-!-padding-right-3 govuk-!-margin-left-0">
  <div class="govuk-grid-column-three-quarters">
      <h2 class="govuk-heading-l">Job role</h2>

      <form class="" action="0-job-role-answer" method="post">
        

        {% set teacher %}
          <span class="govuk-!-font-weight-bold">Teacher</span>
        {% endset %}

        {% set leadership %}
          <span class="govuk-!-font-weight-bold">Leadership</span>
          <span class="govuk-hint govuk-checkboxes__hint govuk-!-padding-0 govuk-!-margin-0">Includes Deputy/Assistant Head, Headteacher, and trust-level roles</span>
        {% endset %}

        {% set midLeader %}
          <span class="govuk-!-font-weight-bold">Middle leader</span>
          <span class="govuk-hint govuk-checkboxes__hint govuk-!-padding-0 govuk-!-margin-0">Includes Heads of Year or Department</span>
        {% endset %}

        {% set teacherAssistant %}
          <span class="govuk-!-font-weight-bold">Teaching assistant</span>
        {% endset %}

        {% set edSupport %}
          <span class="govuk-!-font-weight-bold">Education support</span>
          <span class="govuk-hint govuk-checkboxes__hint govuk-!-padding-0 govuk-!-margin-0">Includes learning support and tutors</span>
        {% endset %}

        {% set sendCo %}
          <span class="govuk-!-font-weight-bold">SENDCo</span>
          <span class="govuk-hint govuk-checkboxes__hint govuk-!-padding-0 govuk-!-margin-0">Special educational needs and disabilities coordinator</span>
        {% endset %}

        
      

          <!-- ROLE START -->
          {{ govukRadios({
            idPrefix: "jobRole",
            name: "jobRole",
            fieldset: {
              legend: {
                text: "What is the job role?",
                classes: "govuk-fieldset__legend--s"
              }
            },
            hint: {
              text: "You can list all the roles below on Teaching Vacancies. You cannot list other roles such as 
              finance manager, administrative assistant, cleaner or chef."
            },
            items: [
              {
                html: teacher,
                value: "teacher"
              },
              {
                html: leadership,
                value: "leadership"
              },
              {
                html: midLeader,
                value: "middleLeader"
              },
              {
                html: teacherAssistant,
                value: "teacher assistant"
              },
              {
                html: edSupport,
                value: "education support"
              },
              {
                html: sendCo,
                value: "sendCo"
              }
            ]
          } | decorateAttributes(data, "data.job.role")) }}
          <!-- ROLE END -->

          <!-- <button class="govuk-button" data-module="govuk-button">Continue</button>
          <p><a href="/prototypes/application/expanded/dashboard">Cancel and return to manage jobs</a></p>  -->

      </form>

    </div>
</div>  

  <!-- {# <div class="govuk-grid-column-one-third">
    <div class="app-step-nav-related app-step-nav-related--singular">
        <h2 class="app-step-nav-related__heading">
            <span class="app-step-nav-related__pretitle">Creating a job listing steps</span>
        </h2>
    </div>
    {% include "includes/hiring-staff/acc-steps.html" %}
  </div> #} -->


<div class="govuk-grid-row full-width-bg-white govuk-!-margin-top-6 govuk-!-padding-top-8 govuk-!-padding-bottom-4 govuk-!-padding-left-3 govuk-!-padding-right-3 govuk-!-margin-left-0">
  <div class="govuk-grid-column-three-quarters">
    
      
        <form class="" action="0-job-role-details-answer" method="post">
            {{ govukCheckboxes({
              fieldset: {
                legend: {
                  text: "Tell us more about the role (optional)",
                  classes: "govuk-fieldset__legend--s"
                }
              },
              hint: {
                text: "Select all that apply"
              },
              items: [
                {
                  text: "Suitable for early career teachers"
                },
                {
                  text: "SEND responsibilities (special educational needs and disabilities)"
                }
              ]
            } | decorateAttributes(data, "data.job.teacherRoleDetails")) }}

            <!-- <button class="govuk-button" data-module="govuk-button">Continue</button> -->
          </form>
  </div>
</div>

<div class="govuk-grid-row full-width-bg-white govuk-!-margin-top-6 govuk-!-padding-top-8 govuk-!-padding-bottom-4 govuk-!-padding-left-3 govuk-!-padding-right-3 govuk-!-margin-left-0">
  <div class="govuk-grid-column-three-quarters">
    <h2 class="govuk-heading-l">Job details</h2>

      <form class="" action="3-working-pattern" method="post">
        
        {# Educational phase #}

        {# Setting up come langauge juggling #}
        {% set educationPhaseText %}
          {% if data.job.phase == "Primary" %}
            Primary school
          {% endif %}
          {% if data.job.phase == "Secondary" %}
            Secondary school
          {% endif %}
        {% endset %}

        {% set initialJobPhase %}
          {% if data.job.phaseSetup %}
            {{ data.job.phaseSetup }}
          {% else %}
            {{ data.job.phase }}
          {% endif %}
        {% endset %}

        {% set jobPhaseChangeLink %}
          {% if data.job.phaseSetup %}
            ./2a-education-phase-setup
          {% else %}
            ./2a-education-phase
          {% endif %}
        {% endset %}

        {{ initialJobPhase | log }}

        {% set educationPhaseInsetHtml %}
          {% if data.job.phase != "More than one phase" and data.job.phaseSetup != "More than one phase" %}
            <p class="govuk-body">You are listing a {{ initialJobPhase }} phase role.
          {% elseif data.job.phase != "More than one phase" and data.job.phaseSetup == "More than one phase" %}
            <p class="govuk-body">You are listing a role covering more than one phase.
          {% elseif data.job.phase == "More than one phase" and (data.job.phaseSetup == "Primary" or data.job.phaseSetup == "Secondary" or data.job.phaseSetup == "16 to 19" ) %}
            <p class="govuk-body">You are listing a {{ initialJobPhase }} phase role.
          {% elseif data.job.phase == "More than one phase" %}
            <p class="govuk-body">You are listing a role covering more than one phase.
          {% endif %}
          {# Only show if it is an all-though phase school #}
          {% if data.job.phase == "More than one phase" %}
            <a href="{{ jobPhaseChangeLink }}">Change the education phase</a>.</p>
          {% endif %}
        {% endset %}

        <!-- <h2 class="govuk-heading-s govuk-!-margin-bottom-0">Education phase</h2> -->
        
        {{ govukInsetText({
          html: educationPhaseInsetHtml
        }) }}

        {# Job title #}

        {% set jobTitleHintHtml %}
        Jobseekers respond better to short, simple job titles. 
        You should include seniority level, subject or key stage, if relevant.
        Avoid start date, salary and responsibilities which will be covered in the job description.
        {% endset %}

        {{ govukCharacterCount({
          maxlength: 90,
          rows: "1",
          label: {
            text: "Job title",
            classes: "govuk-label--s"
          },
          hint: {
            html: jobTitleHintHtml
          }
        } | decorateAttributes(data, "data.job.title")) }}

        {% set conditionalContractHtml %}
          
          {{ govukTextarea({
            rows: "1",
            label: {
              text: "Duration of fixed term contract",
              classes: "govuk-label--s"
            },
            hint: {
              text: "Contract length should be more than 12 weeks. Short term cover should not be advertised on Teaching Vacancies."
            }
          }) }}
        {% endset %}

        {% set conditionalMaternityHtml %}
          
          {{ govukTextarea({
            rows: "1",
            label: {
              text: "Duration of fixed term contract",
              classes: "govuk-label--s"
            },
            hint: {
              text: "Contract length should be more than 12 weeks. Short term cover should not be 
              advertised on Teaching Vacancies."
            }
          }) }}
        {% endset %}



        {{ govukRadios({
            fieldset: {
              legend: {
                text: "Contract type",
                classes: "govuk-fieldset__legend--s"
              }
            },
            items: [
              {
                text: "Permanent"
              },
              {
                text: "Fixed term",
                conditional: {
                  html: conditionalContractHtml
                }
              },
              {
                text: "Maternity or parental leave cover",
                conditional: {
                  html: conditionalMaternityHtml
                }
              }
            ]
          } | decorateAttributes(data, "data.job.contractType")) }}
                      
          {# Subject #}

          {# Only show this is phase is Primary #}
          {% if data.job.phase == "Primary" or data.job.phaseSetup == "Primary"  %} 

            {% include "includes/hiring-staff/primary-subjects.html" %}
            
          {# Show this is phase is Secondary or 16 to 19 #}
          {% elseif data.job.phase == "Secondary" or data.job.phase == "16 to 19" or data.job.phaseSetup == "Secondary" or data.job.phaseSetup == "16 to 19" %}
              
              {% include "includes/hiring-staff/subject-autocomplete.html" %}

          {% else %}

              {% include "includes/hiring-staff/primary-subjects.html" %}
              {% include "includes/hiring-staff/subject-autocomplete.html" %}

          {% endif %}

          <div class="govuk-button-group">
            <button class="govuk-button" data-module="govuk-button">
              Save and continue
            </button>
          
            <button class="govuk-button govuk-button--secondary" data-module="govuk-button">
              Save as draft
            </button>

            <p><a href="/prototypes/application/expanded/dashboard">Cancel and return to manage jobs</a></p>
          </div>

      </form>



  </div>
</div>

{% endblock %}

